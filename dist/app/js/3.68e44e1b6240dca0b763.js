webpackJsonp([3],{"0BJl":function(t,i){},"29Un":function(t,i){},D5Nr:function(t,i,e){"use strict";var s=e("mvHQ"),o=e.n(s),a=(e("v2ns"),e("F3EI")),n=e("Fd2+"),c={name:"homeTop",data:function(){var t=this;return{title:"",city:"",ind:0,keyword:"电竞馆名称/地址",swiperOption:{pagination:".swiper-pagination",observers:!0,observeParents:!0,spaceBetween:10,loop:!0,autoplay:3e3,onClick:function(i){var e=i.realIndex,s=t.swiperlist[e];switch(parseInt(s.type)){case 0:break;case 1:0==s.object_id?t.$router.push({path:"/competition"}):t.$router.push({path:"/competitiondetail/"+s.object_id});break;case 2:0==s.object_id||t.$router.push({path:"/gamedetail",query:{match_id:s.object_id}});break;case 3:0==s.object_id?t.$router.push({path:"/club"}):t.$router.push({path:"/clubdetail",query:{club_id:s.object_id}});break;case 4:0==s.object_id?t.$router.push({path:"/school"}):t.$router.push({path:"/schooldetail",query:{college_id:s.object_id}});break;default:location.replace("/")}}},swiperlist:[],offsettop:0,flag:!1,adimginfo:{},keywords:["电竞馆名称/地址","俱乐部名称/地址","学院名称/地址"]}},provide:function(){return{app:this}},props:{wapcity:{type:String,default:""},showhome:{type:Boolean,default:!0},showtop:{type:Boolean,default:!0}},watch:{$route:function(t){console.log(t.fullPath),-1!==t.fullPath.indexOf("/competition")?(this.ind=0,this.keyword="电竞馆名称/地址"):-1!==t.fullPath.indexOf("/club")?(this.ind=1,this.keyword="俱乐部名称/地址"):(this.ind=2,this.keyword="学院名称/地址"),this.showtop?(this.offsettop=this.$refs.index_top.offsetHeight,localStorage.offsettop=this.offsettop):localStorage.gindex_top=this.$refs.gindex_top.offsetHeight}},created:function(){this.title="托亚克 | "+this.city},mounted:function(){var t=this;this.ind=this.$route.meta.index||0,this.keyword=this.keywords[this.ind],this.showtop?(this.offsettop=this.$refs.index_top.offsetHeight,localStorage.offsettop=this.offsettop):localStorage.gindex_top=this.$refs.gindex_top.offsetHeight,sessionStorage.wapcity?(this.city=sessionStorage.wapcity,t.$emit("pos",JSON.parse(sessionStorage.pos)),t.$emit("city",t.city),t.$emit("cityinfo",t.city,JSON.parse(sessionStorage.pos)),this.showhome?t._GetSlideList():this._GetAdv()):this.initMap()},components:{swiper:a.swiper,swiperSlide:a.swiperSlide},methods:{tabhome:function(t,i){this.ind=t,this.$router.push(i)},_GetSlideList:function(){var t=this;this.$api.GetSlideList(this.city).then(function(i){1==i.code&&(t.flag=!0,t.swiperlist=i.data)})},_GetAdv:function(){var t=this;this.$api.GetAdv(2).then(function(i){console.log(i),1==i.code&&(t.adimginfo=i.data)})},goad:function(){var t=this.adimginfo;parseInt(this.adimginfo.type);t.url&&window.open(t.url)},initMap:function(){var t=this;new AMap.Map("map",{zoom:0}).plugin(["AMap.Autocomplete","AMap.Geolocation"],function(){new AMap.Geolocation({timeout:6e3}).getCurrentPosition(function(i,e){if(console.log(e,"location"),"complete"==i&&1==e.status){localStorage.loccity=e.addressComponent.city||e.addressComponent.province,t.city=sessionStorage.wapcity||e.addressComponent.city||e.addressComponent.province||"北京";var s=[e.position.lat,e.position.lng];sessionStorage.pos=o()(s),sessionStorage.wapcity=e.addressComponent.city||e.addressComponent.province,t.$emit("city",t.city),t.$emit("pos",[e.position.lat,e.position.lng]),t.$emit("cityinfo",t.city,s),t.showhome?t._GetSlideList():t._GetAdv()}else t.$com.showtoast("获取位置失败"),n.a.alert({title:"",message:"为了正常使用，\n 请开启GPRS定位功能"}).then(function(){t.city="北京",t.$emit("pos",["39.73","116.33"]),sessionStorage.pos=o()(["39.73","116.33"]),t.$emit("city",t.city),t.$emit("cityinfo",t.city,["39.73","116.33"]),t.showhome?t._GetSlideList():t._GetAdv()})})})},go_city:function(){this.$router.push({path:"/changecity"})}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{attrs:{id:"map"}}),t._v(" "),e("van-sticky",[t.showtop?e("div",{ref:"index_top",staticClass:"index_top"},[e("div",{staticClass:"htop"},[e("div",{staticClass:"htopleft"},[e("span",{class:{activespan:0==t.ind},on:{click:function(i){return t.tabhome(0,"/competition")}}},[t._v("电竞馆"),0==t.ind?e("span",{staticClass:"border_b"}):t._e()]),t._v(" "),e("span",{class:{activespan:1==t.ind},on:{click:function(i){return t.tabhome(1,"/club")}}},[t._v("俱乐部"),1==t.ind?e("span",{staticClass:"border_b "}):t._e()]),t._v(" "),e("span",{class:{activespan:2==t.ind},on:{click:function(i){return t.tabhome(2,"/school")}}},[t._v("学院"),2==t.ind?e("span",{staticClass:"border_b border_b1 "}):t._e()])]),t._v(" "),e("div",{staticClass:"index_address",on:{click:t.go_city}},[e("van-icon",{attrs:{name:"location"}}),t._v(" "),e("span",[t._v(t._s(t.city||"定位中..."))])],1)]),t._v(" "),e("router-link",{staticClass:"searchbox",attrs:{to:"/search?type="+t.ind,tag:"div"}},[e("div",{staticClass:"searchinput"},[e("span",{staticClass:"iconfont iconsousuo1"}),e("span",[t._v(t._s(t.keyword))])])])],1):e("div",{ref:"gindex_top",staticClass:"htop"},[e("router-link",{staticClass:"searchinput",attrs:{tag:"div",to:"/search?type=0"}},[e("span",{staticClass:"iconfont iconsousuo1"}),e("span",[t._v(t._s(t.keyword))])]),t._v(" "),e("div",{staticClass:"index_address",on:{click:t.go_city}},[e("span",{staticClass:"iconfont icondingweiweizhi"}),t._v(" "+t._s(t.city)+"\n            ")])],1)]),t._v(" "),t.showhome?e("div",{staticClass:"swiperbox"},[e("div",{staticClass:"sbg"}),t._v(" "),t.flag&&t.swiperlist.length?e("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},[t._l(t.swiperlist,function(t,i){return e("swiper-slide",{key:i},[e("van-image",{attrs:{width:"345ox",height:"160px",fit:"cover",src:t.image_m}})],1)}),t._v(" "),t.swiperlist.length>1?e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"}):t._e()],2):t._e(),t._v(" "),t.flag&&0==t.swiperlist.length?e("NoData",{staticClass:"nodata",attrs:{top:0,text:"商家还没有传图"}}):t._e()],1):e("div",{staticClass:"swiperbox",on:{click:t.goad}},[e("div",{staticClass:"sbg"}),t._v(" "),e("div",{staticClass:"adimg"},[e("img",{attrs:{src:t.adimginfo.image,alt:""}})])])],1)},staticRenderFns:[]};var p=e("VU/8")(c,r,!1,function(t){e("29Un")},"data-v-03d38aaf",null);i.a=p.exports},nU8l:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={name:"home",data:function(){return{city:"",position:[]}},created:function(){},methods:{getcity:function(t){console.log(t,"val"),this.city=t},getpos:function(t){console.log(t),this.position=t}},components:{homeTop:e("D5Nr").a}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"index"},[e("homeTop",{attrs:{showhome:!0,showtop:!0},on:{city:t.getcity,pos:t.getpos}}),t._v(" "),t.city&&t.position.length?e("router-view",{staticClass:"router-view",attrs:{wapcity:t.city,pos:t.position}}):t._e()],1)},staticRenderFns:[]};var a=e("VU/8")(s,o,!1,function(t){e("0BJl")},"data-v-b5398894",null);i.default=a.exports}});