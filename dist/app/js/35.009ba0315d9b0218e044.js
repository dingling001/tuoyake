webpackJsonp([35],{cESP:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e={name:"competition",props:{wapcity:{type:String,default:"北京"},pos:{type:Array,default:["39.73","116.33"]}},data:function(){return{isDownLoading:!1,isUpLoading:!1,finished:!1,offsettop:0,page:0,keyword:"",city:"北京",lat:0,lng:0,recommend:0,label:"",district:"",circle:"",netlist:[],offset:0,labellist:[{value:"",text:"全部服务"}],districtlist:[{id:"",childlist:[],name:"全部地区",pid:"",spacer:""}],citypid:"",lindex:0,rindex:0,totop:!1,showoverlay:!1,flag:!1,position:[],selectName:"全部地区",order:2}},inject:["app"],created:function(){this.offsettop=parseInt(localStorage.offsettop),this.city=this.wapcity,this.position=this.pos},mounted:function(){this._GetBarList(),this._GetLabelList(),this._GetAreaPidByName()},methods:{_GetLabelList:function(){var t=this;this.$api.GetLabelList().then(function(i){if(1==i.code){var s=i.data;for(var e in s)t.labellist.push({value:s[e],text:s[e]});t.label=t.labellist[0].value}})},_GetAreaPidByName:function(){var t=this;this.$api.GetAreaPidByName(this.city).then(function(i){1==i.code&&i.data&&(t.citypid=i.data,t._GetAreaListTree(),t._GetBarList())})},_GetBarList:function(){var t=this,i=this.page+1;this.$api.GetBarList(i,this.keyword,this.city,this.position[0],this.position[1],this.recommend,this.label,0==this.lindex?"":this.district,this.circle,this.order).then(function(i){t.flag=!0,1==i.code&&(t.netlist.length?(t.isUpLoading&&(t.netlist=t.netlist.concat(i.data.data),t.$nextTick(function(){t.isUpLoading=!1}),i.data.data.length<10&&(t.finished=!0)),t.isDownLoading&&(t.isDownLoading=!1,t.netlist=i.data.data,t.finished&&(t.finished=!1))):t.netlist=i.data.data)})},onRefresh:function(){var t=this;setTimeout(function(){t.$com.showtoast("刷新成功"),t.isDownLoading=!1,t.page=0,t._GetBarList()},500)},onLoad:function(){this.page++,this.isUpLoading=!0,this._GetBarList()},_GetAreaListTree:function(){var t=this;this.$api.GetAreaListTree(this.citypid).then(function(i){t.districtlist=t.districtlist.concat(i.data),t.districtlist.map(function(t,i){i>0&&t.childlist.unshift({childlist:[],id:"",name:"全部街道",pid:"",spacer:""})})})},recommendlist:function(){1==this.recommend?this.recommend=0:this.recommend=1,this.flag=!1,this.page=0,this.netlist=[],this._GetBarList()},selcetcity:function(t){this.lindex=t,this.rindex=0,0==t?(this.flag=!1,this.$refs.item.toggle(),this.district="",this.selectName="全部地区",this.page=0,this.circle="",this.netlist=[],this._GetBarList()):this.district=this.districtlist[t].name},selcetarea:function(t,i,s){this.rindex=t,this.$refs.item.toggle(),this.circle=0==t?"":i,this.selectName=0==t?this.district:i,this.page=0,this.flag=!1,this.netlist=[],this._GetBarList()},changelabel:function(){this.page=0,this.netlist=[],this.flag=!1,this._GetBarList()},godetail:function(t){this.$router.push({path:"/competitiondetail",query:{id:t}})}}},a={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"cbox"},[s("van-sticky",{staticClass:"sticky ",attrs:{"offset-top":t.offsettop}},[s("div",{staticClass:"cselect"},[s("div",{class:["cselectitem",1==t.recommend?"cselectitemactive":""],on:{click:t.recommendlist}},[s("span",[t._v("推荐电竞馆")])]),t._v(" "),s("van-dropdown-menu",{class:[""==t.label?"":"labelbox","全部地区"==t.selectName?"":"cccc"],attrs:{"active-color":"#f2313b"}},[s("van-dropdown-item",{attrs:{options:t.labellist,overlay:""},on:{change:t.changelabel},model:{value:t.label,callback:function(i){t.label=i},expression:"label"}}),t._v(" "),s("van-dropdown-item",{ref:"item",attrs:{title:t.selectName,disabled:!t.flag&&1==t.districtlist.length,overlay:""},model:{value:t.selectName,callback:function(i){t.selectName=i},expression:"selectName"}},[s("div",{staticClass:"citybox"},[s("div",{staticClass:"citems dleft"},t._l(t.districtlist,function(i,e){return s("div",{key:e,class:{activecity:e==t.lindex},on:{click:function(i){return t.selcetcity(e)}}},[t._v(t._s(i.name)+"\n                            ")])}),0),t._v(" "),s("div",{staticClass:"citems dright"},t._l(t.districtlist[t.lindex].childlist,function(i,e){return s("div",{key:e,class:{activecity:t.rindex==e},on:{click:function(s){return t.selcetarea(e,i.name)}}},[s("span",[t._v(t._s(i.name))])])}),0)])])],1)],1)]),t._v(" "),t.flag?t._e():s("div",{staticClass:"van-row--flex van-cell--center van-row--justify-center"},[s("van-loading",{attrs:{type:"spinner"}})],1),t._v(" "),t.flag&&t.netlist.length?s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isDownLoading,callback:function(i){t.isDownLoading=i},expression:"isDownLoading"}},[s("van-list",{staticClass:"clist",attrs:{finished:t.finished,offset:t.offset,"finished-text":"到底了"},on:{load:t.onLoad},model:{value:t.isUpLoading,callback:function(i){t.isUpLoading=i},expression:"isUpLoading"}},t._l(t.netlist,function(i,e){return s("div",{key:e,staticClass:"citem",on:{click:function(s){return t.godetail(i.id)}}},[s("div",{staticClass:"cimg"},[s("van-image",{attrs:{width:"24vw",height:"24vw",fit:"cover",src:i.image}}),t._v(" "),1==i.recommend?s("span",[t._v("推荐")]):t._e()],1),t._v(" "),s("div",{staticClass:"cright"},[s("div",{staticClass:"name single-line-text"},[t._v(t._s(i.name))]),t._v(" "),s("div",{staticClass:"cname"},[s("div",{staticClass:"namebox"},[s("div",{staticClass:"startbox"},t._l(parseInt(i.star),function(t){return s("span",{staticClass:"iconfont iconstar-fill"})}),0)]),t._v(" "),s("div",{staticClass:"juli"},[t._v(t._s(i.distance))])]),t._v(" "),s("div",{staticClass:"caddress"},[s("span",{staticClass:"single-line-text"},[t._v(t._s(i.district)+" | 网吧网咖")])]),t._v(" "),i.label_ids?s("div",{staticClass:"ctype"},t._l(i.label_ids.slice(0,3),function(e){return s("span",{staticClass:"single-line-text",style:{maxWidth:3==i.label_ids.length?" 33%":""}},[t._v(t._s(e))])}),0):t._e(),t._v(" "),s("div",{staticClass:"goods"},t._l(i.goods,function(i,e){return e<2?s("div",{staticClass:"gitem"},[s("span",{staticClass:"h"},[t._v("惠")]),t._v(" "),s("span",{staticClass:"price"},[t._v("￥ "+t._s(i.price))]),t._v(" "),s("span",{staticClass:"name"},[t._v(t._s(i.name))])]):t._e()}),0),t._v(" "),s("div",{staticClass:"prize_pool"},[s("div",{staticClass:"pool van-ellipsis"},[t._v(t._s(i.prize_pool_price))]),t._v(" "),s("div",{staticClass:"vip"},[t._v("会员"),s("span",{staticClass:"price"},[t._v(" ￥"+t._s(i.min_price)+"/时")]),t._v(" 起")])])])])}),0)],1):t._e(),t._v(" "),t.flag&&0==t.netlist.length?s("div",{staticClass:"clist"},[s("NoData",{staticClass:"nodata",attrs:{top:0,text:"暂无匹配的商家"}})],1):t._e()],1)},staticRenderFns:[]};var n=s("VU/8")(e,a,!1,function(t){s("zAMB")},"data-v-2d1f4d33",null);i.default=n.exports},zAMB:function(t,i){}});