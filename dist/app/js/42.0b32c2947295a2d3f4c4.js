webpackJsonp([42],{"BG+f":function(e,t){},P6Hp:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"myFeedback",data:function(){return{message:"",fileList:[],imgs:[]}},methods:{beforeRead:function(e){var t="image/jpeg"==e.type||"image/png"==e.type||"image/gif"==e.type,s=e.size/1024/1024<2;t?s?this._CommonUpload(e):this.$com.showtoast("上传文件大小不能超过 2MB!"):this.$com.showtoast("请上传 png、jpg格式!")},beforeDelete:function(e,t){this.imgs.splice(t.index,1),this.fileList.splice(t.index,1)},_CommonUpload:function(e){var t=this;this.$api.CommonUpload(e).then(function(e){401!=e.code?1==e.code&&(t.$com.showtoast("上传成功！","success"),t.fileList.push({url:e.data.url}),t.imgs.push(e.data.url)):t.$router.push("/login")})},feedback_fn:function(){var e=this;""==this.message?this.$com.showtoast("请输入内容"):this.$api.SetFeedback(this.message,this.imgs.toString()).then(function(t){1==t.code&&(e.$com.showtoast("提交成功"),setTimeout(function(){e.$router.go(-1)},1500))})}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fbox"},[s("div",{staticClass:"ftitle"},[e._v("问题描述")]),e._v(" "),s("van-field",{attrs:{type:"textarea",placeholder:"请描述具体问题...",rows:"5",autosize:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),e._m(0),e._v(" "),s("van-uploader",{attrs:{multiple:"","max-count":3,"before-read":e.beforeRead,"before-delete":e.beforeDelete},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),e._v(" "),s("div",{staticClass:"fbtn",on:{click:e.feedback_fn}},[e._v("提交")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ftips"},[t("span",[this._v("上传凭证")]),t("span",{staticClass:"more"},[this._v("（ 图片最多添加3张 ）")])])}]};var o=s("VU/8")(i,a,!1,function(e){s("BG+f")},"data-v-231c283c",null);t.default=o.exports}});