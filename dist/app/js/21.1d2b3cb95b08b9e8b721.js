webpackJsonp([21],{hY8P:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"reg",data:function(){return{mobile:"",captcha:"",show:!1,time:6e4,showbtn:!0,redirect:"",atuostart:!0,showkeybord:!1}},created:function(){localStorage.user_twap&&this.$router.replace("/"),this.redirect=this.$route.query.redirect},methods:{endtime:function(){this.showbtn=!0},_SmsSend:function(){var t=this;this.$com.checkPhone(this.mobile)?this.$api.SmsSend(this.mobile,"login").then(function(e){t.showbtn=!1,1==e.code?(t.$com.showtoast(e.msg),t.captcha=e.data):t.$com.showtoast(e.msg)}):this.$com.showtoast("请输入正确的手机号")},gonext:function(){var t=this;this.$com.checkPhone(this.mobile)?""==this.captcha?this.$com.showtoast("请输入验证码"):this.$api.MobileLogin(this.mobile,this.captcha).then(function(e){if(1==e.code){localStorage.user_twap=e.data.userinfo.token,t.$com.showtoast("登录成功");var o=decodeURIComponent(t.$route.query.redirect||"/");t.redirect?t.$router.push(o):t.$router.replace("/")}else t.$com.showtoast(e.msg||"稍后再试")}):this.$com.showtoast("请输入正确的手机号")},mobileinput:function(){this.mobile=this.mobile.replace(/[^\d]/g,"")},goagree:function(){this.$router.push({path:"/agreement"})},goprvide:function(){this.$router.push({path:"/privacy"})},backlogin:function(){this.$router.go(-1)}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login_box"},[o("div",{staticClass:"login_head",on:{click:function(e){return t.$router.go(-1)}}},[o("div",{staticClass:"iconfont iconfanhui"})]),t._v(" "),o("div",{staticClass:"login_title"},[t._v("验证码登录")]),t._v(" "),o("div",{staticClass:"loginform"},[o("van-field",{attrs:{placeholder:"手机号",maxlength:"11",readonly:"",clickable:"",clearable:"",type:"text",clearable:""},on:{input:t.mobileinput},nativeOn:{touchstart:function(e){e.stopPropagation(),t.showkeybord=!0}},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),o("van-field",{attrs:{placeholder:"短信验证码",type:"text",maxlength:"6",center:"",clearable:""},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}},[t.showbtn?o("van-button",{staticClass:"code",attrs:{slot:"button",type:"default",size:"small"},on:{click:t._SmsSend},slot:"button"},[t._v("\n                获取验证码\n            ")]):o("span",{attrs:{slot:"button"},slot:"button"},[o("span",[t._v("重新获取")]),t._v(" "),o("van-count-down",{ref:"countDown",attrs:{time:t.time,format:"ss","auto-start":t.atuostart},on:{finish:t.endtime}}),t._v(" "),o("span",[t._v("S")])],1)],1),t._v(" "),o("div",{staticClass:"login_btn",on:{click:t.gonext}},[t._v("登录")]),t._v(" "),o("div",{staticClass:"reg_agree"},[t._v("登录即同意"),o("span",{on:{click:t.goagree}},[t._v("《用户协议》")]),t._v("和"),o("span",{on:{click:t.goprvide}},[t._v("《隐私政策》")])]),t._v(" "),o("div",{staticClass:"login_pass",on:{click:t.backlogin}},[t._v("密码登录")]),t._v(" "),o("van-number-keyboard",{attrs:{show:t.showkeybord,maxlength:11},on:{blur:function(e){t.showkeybord=!1}},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1)])},staticRenderFns:[]};var i=o("VU/8")(a,n,!1,function(t){o("tJEk")},"data-v-904e52e0",null);e.default=i.exports},tJEk:function(t,e){}});