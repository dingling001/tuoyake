webpackJsonp([33],{q2CZ:function(e,t){},yY4b:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"myset",data:function(){return{user_info:{},showname:!1,user_twap:"",fileList:[],imgs:[]}},mounted:function(){this.user_twap=localStorage.user_twap,this._GetUserInfo()},methods:{_GetUserInfo:function(){var e=this;this.$api.GetUserInfo().then(function(t){1==t.code&&(e.user_info=t.data,e.user_info.mobile=e.user_info.mobile.substr(0,3)+"****"+e.user_info.mobile.substr(7))})},beforeRead:function(e){var t="image/jpeg"==e.type||"image/png"==e.type||"image/gif"==e.type,i=e.size/1024/1024<2;t?i?this._CommonUpload(e):this.$com.showtoast("上传文件大小不能超过 2MB!"):this.$com.showtoast("请上传 png、jpg格式!")},beforeDelete:function(e,t){this.imgs.splice(t.index,1),this.fileList.splice(t.index,1)},_CommonUpload:function(e){var t=this;this.$api.CommonUpload(e).then(function(e){401!=e.code?1==e.code&&(t.$com.showtoast("修改成功！","success"),t.fileList.push({url:e.data.url}),t.imgs.push(e.data.url),t._Profile()):t.$router.push("/login")})},_Profile:function(){var e=this;this.$api.Profile(this.imgs[0]||this.user_info.avatar,this.user_info.nickname).then(function(t){1==t.code?e.$com.showtoast("修改成功"):e.$com.showtoast(t.msg||"稍后在试"),e._GetUserInfo()})},changename:function(){""==this.user_info.nickname?this.$com.showtoast("昵称不能为空"):this.user_info.nickname.length>12?this.$com.showtoast("昵称不能超过12个字符"):this._Profile()},loginout:function(){localStorage.removeItem("user_twap"),this.$router.replace("/")}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-cell-group",{staticClass:"setbox"},[i("van-cell",{staticClass:"headimg",attrs:{"is-link":"",title:"头像"}},[i("div",{staticClass:"imgbox"},[i("van-uploader",{attrs:{"max-count":1,"before-read":e.beforeRead},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},[i("van-image",{attrs:{round:"",fit:"cover",width:"40px",height:"40px",src:e.user_info.avatar}})],1)],1)]),e._v(" "),i("van-cell",{attrs:{title:"昵称",value:e.user_info.nickname},on:{click:function(t){e.showname=!0}}}),e._v(" "),i("van-cell",{attrs:{title:"手机号",value:e.user_info.mobile,to:"changephone","is-link":""}}),e._v(" "),i("van-cell",{attrs:{title:"登录密码","is-link":"",to:"changepass"}}),e._v(" "),i("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":"",className:"nickname","image-fit":"contain"},on:{confirm:e.changename},model:{value:e.showname,callback:function(t){e.showname=t},expression:"showname"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.user_info.nickname,expression:"user_info.nickname"}],attrs:{type:"text",maxlength:"12"},domProps:{value:e.user_info.nickname},on:{input:function(t){t.target.composing||e.$set(e.user_info,"nickname",t.target.value)}}})]),e._v(" "),e.user_twap?i("div",{staticClass:"mbnt",on:{click:e.loginout}},[e._v("退出登录")]):e._e()],1)},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(e){i("q2CZ")},"data-v-48f11f7c",null);t.default=o.exports}});