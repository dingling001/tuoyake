webpackJsonp([16],{KIOv:function(t,e){},"rcM/":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"changgebox"},[o("div",{staticClass:"hr"}),t._v(" "),o("van-cell-group",[o("van-field",{attrs:{label:"原手机号",readonly:"",value:t.user_info.mobile}}),t._v(" "),o("van-field",{attrs:{label:"新手机号",placeholder:"新手机号",type:"text",maxlength:"11",clearable:""},on:{input:t.accountinput},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),o("van-field",{attrs:{label:"验证码",placeholder:"短信验证码",type:"text",center:"",clearable:""},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}},[t.showbtn?o("van-button",{staticClass:"code",attrs:{slot:"button",type:"default",size:"small"},on:{click:t._SmsSend},slot:"button"},[t._v("\n                获取验证码\n            ")]):o("span",{staticClass:"btntext",attrs:{slot:"button"},slot:"button"},[o("span",[t._v("重新获取")]),t._v(" "),o("van-count-down",{ref:"countDown",attrs:{time:t.time,format:"ss","auto-start":t.atuostart},on:{finish:t.endtime}}),t._v(" "),o("span",[t._v("S")])],1)],1)],1),t._v(" "),o("div",{staticClass:"btn",on:{click:t.gonext}},[t._v("修改并保存")])],1)},staticRenderFns:[]};var n=o("VU/8")({name:"changepass",data:function(){return{mobile:"",captcha:"",show:!1,time:6e4,showbtn:!0,redirect:"",atuostart:!0,user_info:{}}},created:function(){this._GetUserInfo()},methods:{_GetUserInfo:function(){var t=this;this.$api.GetUserInfo().then(function(e){1==e.code&&(t.user_info=e.data,t.user_info.mobile=t.user_info.mobile.substr(0,3)+"****"+t.user_info.mobile.substr(7))})},endtime:function(){this.showbtn=!0},_SmsSend:function(){var t=this;""==this.mobile?this.$com.showtoast("请输入手机号"):this.$api.SmsSend(this.mobile,"changemobile").then(function(e){t.showbtn=!1,1==e.code?(t.$com.showtoast(e.msg),t.captcha=e.data):t.$com.showtoast(e.msg)})},gonext:function(){var t=this;this.$com.checkPhone(this.account)?""==this.captcha?this.$com.showtoast("请输入验证码"):this.$api.ChangeMobile(this.mobile,this.captcha).then(function(e){1==e.code?(t.$com.showtoast("修改成功"),t.$router.go(-1)):t.$com.showtoast(e.msg||"稍后再试")}):this.$com.showtoast("请输入正确的新手机号")},accountinput:function(){this.mobile=this.mobile.replace(/[^\d]/g,"")}}},s,!1,function(t){o("KIOv")},"data-v-ab3d9084",null);e.default=n.exports}});