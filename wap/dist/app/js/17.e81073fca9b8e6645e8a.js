webpackJsonp([17],{"8Pkt":function(i,t){},iv6e:function(i,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"club",data:function(){return{clist:[],clublist:[],ind:0,page:0,keyword:"",city:"",category_id:"",isUpLoading:!1,isDownLoading:!1,finished:!1,offset:0,finishedtext:"到底了"}},created:function(){this._Category()},watch:{city:{handler:function(i){this.city=i,console.log(this.city),this._ClubIndex()},immediate:!0}},methods:{_Category:function(){var i=this;this.$api.Category().then(function(t){1==t.code&&(i.clist=t.data)})},_ClubIndex:function(){var i=this,t=this.page+1;this.$com.showtoast("加载中…","","",1e3,"",!1,!0),this.$api.ClubIndex(t,this.category_id,this.keyword,this.city).then(function(t){1==t.code&&(i.clublist.length?(i.isUpLoading&&(i.clublist=i.clublist.concat(t.data.data),i.$nextTick(function(){i.isUpLoading=!1}),t.data.data.length<10&&(i.finished=!0,i.finishedtext="到底了")),i.isDownLoading&&(i.isDownLoading=!1,i.clublist=t.data.data,i.finished&&(i.finished=!1))):(console.log(t),i.clublist=t.data.data,i.finishedtext="没有更多了"))})},onRefresh:function(){var i=this;setTimeout(function(){i.$com.showtoast("刷新成功"),i.isDownLoading=!1,i.page=0,i._ClubIndex()},500)},onLoad:function(){this.page++,this.isUpLoading=!0,this._ClubIndex()},activeList:function(i,t){this.page=0,this.ind=i,this.category_id=t,this._ClubIndex()},godetail:function(i){this.$router.push({path:"/clubdetail",query:{club_id:i}})}}},a={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",{staticClass:"jbox"},[s("div",{staticClass:"jnav"},i._l(i.clist,function(t,n){return s("span",{key:t.id,class:{activespan:i.ind==n},on:{click:function(s){return i.activeList(n,t.id)}}},[i._v(i._s(t.name))])}),0),i._v(" "),i.clublist.length?s("van-pull-refresh",{staticClass:"jlist",on:{refresh:i.onRefresh},model:{value:i.isDownLoading,callback:function(t){i.isDownLoading=t},expression:"isDownLoading"}},[s("van-list",{staticClass:"jlist",attrs:{finished:i.finished,offset:i.offset,"finished-text":i.finishedtext},on:{load:i.onLoad},model:{value:i.isUpLoading,callback:function(t){i.isUpLoading=t},expression:"isUpLoading"}},i._l(i.clublist,function(t,n){return s("div",{key:t.category_id,staticClass:"jitem van-row--flex",on:{click:function(s){return i.godetail(t.category_id)}}},[s("div",{staticClass:"jimg"},[s("img",{attrs:{src:t.image,alt:""}})]),i._v(" "),s("div",{staticClass:"jright"},[s("div",{staticClass:"jname van-ellipsis"},[i._v(i._s(t.name))]),i._v(" "),s("div",{staticClass:"jinfo"},[s("span",{staticClass:"name"},[i._v(i._s(t.contact))]),s("span",{staticClass:"tel"},[i._v(i._s(t.contact_number))])]),i._v(" "),s("div",{staticClass:"jaddress van-ellipsis"},[i._v(i._s(t.address))])])])}),0)],1):i._e()],1)},staticRenderFns:[]};var e=s("C7Lr")(n,a,!1,function(i){s("8Pkt")},"data-v-65fef3a2",null);t.default=e.exports}});